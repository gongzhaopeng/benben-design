-- Database: MongoDB

# 试卷模子
ExamPaperMold:
  id: ""                                  # M
  #+++  # metadata
  create-time:                            # M
  author:                                 # M
    id: ""
    last-name: ""
    nickname: ""
  state:  ""                              # M 题目状态, =(values)=>{"Developing", "Usable", "Discarded", ...}
  #---  # metadata
  title: ""                               # M
  description: ""                         # M 用于管理
  introduction: ""                        # M 试卷引导语, 富文本编辑器输出的结果
  eps-generators:                         # M 试卷子块生成器集合
    - {CompositeEpsGenerator}
  time-limit: 0                           # O unit: second
  tags:                                   # O 用于试卷管理
    - ""                                  #
  ext-features:                           # O 特征向量, 有业务含义
    k1: {MediumValue}
    kn: {MediumValue}
  default-qu-score: 0.0                   # O
  # TODO

# 可复合的试卷子块生成器
CompositeEpsGenerator:
  title: ""                               # M
  purpose: ""                             #   =(values)=>{"Formal", "Experiment", ...}
  description: ""                         # M 用于管理
  introduction: ""                        # M 试卷子块引导语, 富文本编辑器输出的结果
  generate-strategy: {EpsGenerateStrategy}
  sub-generators:
    - {CompositeEpsGenerator}
  questions:
    - {EpQuestion}
  time-limit: 0                           # O unit: second
  ext-features:                           # O 特征向量, 有业务含义
    k1: {MediumValue}
    kn: {MediumValue}
  default-qu-score: 0.0                   # O

# 试卷子块生成策略
EpsGenerateStrategy:
  type: ""                                #   策略类型, =(values)=>{"Composite_Fix", "Composite_Rand" "QSet_Fix", "QSet_Rand"}
  metadata:                               #   策略metadata
    k1: "v1"                              #   =(example)=> {"output-eps-count": "3", "output-question-count": "10", ...}
    kn: "vn"

# 试卷题目
EpQuestion:
  id: ""                                  # M 所引用的题库中题目的ID
  title: ""
  composite-ep-qunit: {CompositeEpQuestionUnit}
  # TODO

CompositeEpQuestionUnit:
  form: ""                                # M Question的形式
  stem: ""
  options:
    - number: 0
      content: ""
  qu-score: 0.0                           # O
  answer-match-strategy: {EpAnswerMatchStrategy}  # O 答案匹配策略
  std-answers:
    - {EpStdAnswer}
  sub-qunits:
    - {CompositeEpQuestionUnit}
  ext-features:
    k1: {MediumValue}
    kn: {MediumValue}

# 答案匹配策略
EpAnswerMatchStrategy:
  type: ""                                #   策略类型, =(values)=>{"ORDER_SENSITIVE_EQUAL", "ORDER_INSENSITIVE_EQUAL", ...}
  metadata:                               #   策略metadata
    k1: "v1"
    kn: "vn"

EpStdAnswer:
  number: 0                               # M 编号越小,优先级越高
  choices:
    - 0
    - 0
    ...
  criteria:
    - {MediumValue}
  score: 0.0
  # TODO

MediumValue:
  media-type: ""                          #   Media-Type
  mark: ""
  link: ""                                #   Link
  value: ""